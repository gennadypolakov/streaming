{"version":3,"sources":["../../../../js/cabinet/main.js"],"names":["localStorageConst","emojionearea_expanded","add_group","edit_group","$","datetimepicker","setLocale","window","emojioneVersion","addGroup","editGroup","on","toggleClass","addClass","format","inline","lang","dayOfWeekStart","timepicker","scrollInput","scrollMonth","step","select2","init_select_ajax","document","$this","$e","data","length","closest","find","CopyToClipboard","tooltip","setTimeout","rng","sel","val","select","createRange","selectNode","getSelection","removeAllRanges","addRange","alert","execCommand","ajax","dataType","delay","params","search","page","processResults","results","pagination","more","cache","templateResult","templateSelection","notify","msg","type","message","offset","x","y","notify_default_error","e","pasteHtmlAtCaret","html","range","getRangeAt","rangeCount","deleteContents","el","createElement","innerHTML","frag","createDocumentFragment","node","lastNode","firstChild","appendChild","insertNode","cloneRange","setStartAfter","setEndAfter","collapse","selection","pasteHTML"],"mappings":";;AAAA;AACA,IAAIA,oBAAoB;AACpBC,2BAAuB;AADH,CAAxB;AAGA,IAAIC,SAAJ,EAAcC,UAAd;AACAC,EAAE,YAAY;AACVA,MAAEC,cAAF,CAAiBC,SAAjB,CAA2B,IAA3B;AACAC,WAAOC,eAAP,GAAyB,OAAzB;AACAN,gBAAY,IAAIO,QAAJ,CAAaL,EAAE,iBAAF,CAAb,CAAZ;AACAD,iBAAa,IAAIO,SAAJ,CAAcN,EAAE,aAAF,CAAd,CAAb;AACA;AACAA,MAAE,gBAAF,EAAoBO,EAApB,CAAuB,OAAvB,EAAgC,YAAY;AACxCP,UAAE,YAAF,EAAgBQ,WAAhB,CAA4B,0BAA5B,EAAwDC,QAAxD,CAAiE,gBAAjE;AACA,eAAO,KAAP;AACH,KAHD;;AAKAT,MAAE,gBAAF,EAAoBC,cAApB,CAAmC;AAC/BS,gBAAQ,OADuB;AAE/BC,gBAAQ,KAFuB;AAG/BC,cAAM,IAHyB;AAI/BC,wBAAgB,CAJe;AAK/BC,oBAAY,KALmB;AAM/BC,qBAAa,KANkB;AAO/BC,qBAAa;AAPkB,KAAnC;;AAUAhB,MAAE,oBAAF,EAAwBC,cAAxB,CAAuC;AACnCS,gBAAQ,WAD2B;AAEnCC,gBAAQ,KAF2B;AAGnCC,cAAM,IAH6B;AAInCK,cAAM,EAJ6B;AAKnCJ,wBAAgB,CALmB;AAMnCC,oBAAY,IANuB;AAOnCC,qBAAa,KAPsB;AAQnCC,qBAAa;AARsB,KAAvC;;AAWAhB,MAAE,YAAF,EAAgBkB,OAAhB;;AAEAC,qBAAiBnB,EAAE,iBAAF,CAAjB;;AAEAA,MAAEoB,QAAF,EAAYb,EAAZ,CAAe,OAAf,EAAwB,QAAxB,EAAkC,YAAY;AAC1C,YAAIc,QAAQrB,EAAE,IAAF,CAAZ;AACA,YAAIsB,KAAKtB,EAAEqB,MAAME,IAAN,CAAW,QAAX,CAAF,CAAT;;AAEA,YAAI,CAACD,GAAGE,MAAR,EAAgB;AACZF,iBAAKtB,EAAE,IAAF,EAAQyB,OAAR,CAAgB,WAAhB,EAA6BC,IAA7B,CAAkC,eAAlC,CAAL;AACH;;AAEDC,wBAAgBL,EAAhB;AACAD,cAAMO,OAAN,CAAc,MAAd;;AAEAC,mBAAW,YAAY;AACnBR,kBAAMO,OAAN,CAAc,SAAd;AACH,SAFD,EAEG,IAFH;AAGA,eAAO,KAAP;AACH,KAfD;AAiBH,CArDD;;AAuDA,SAASD,eAAT,CAAyBL,EAAzB,EAA6B;AACzB,QAAIQ,GAAJ,EAASC,GAAT;AACA,QAAIT,GAAGU,GAAH,EAAJ,EAAc;AACVV,WAAGW,MAAH;AACH,KAFD,MAEO,IAAIb,SAASc,WAAb,EAA0B;AAC7BJ,cAAMV,SAASc,WAAT,EAAN;AACAJ,YAAIK,UAAJ,CAAeb,GAAG,CAAH,CAAf;AACAS,cAAM5B,OAAOiC,YAAP,EAAN;AACAL,YAAIM,eAAJ;AACAN,YAAIO,QAAJ,CAAaR,GAAb;AACH,KANM,MAMA;AACHS,cAAM,yCAAN;AACH;AACDnB,aAASoB,WAAT,CAAqB,MAArB;AACH;;AAED,SAASrB,gBAAT,CAA0BG,EAA1B,EAA8B;AAC1BA,OAAGJ,OAAH,CAAW;AACPuB,cAAM;AACFC,sBAAU,MADR;AAEFC,mBAAO,GAFL;AAGFpB,kBAAM,cAAUqB,MAAV,EAAkB;AACpB,uBAAO;AACHC,4BAAQD,OAAO,MAAP,CADL;AAEHE,0BAAMF,OAAO,MAAP;AAFH,iBAAP;AAIH,aARC;AASFG,4BAAgB,wBAAUxB,IAAV,EAAgBqB,MAAhB,EAAwB;AACpCA,uBAAO,MAAP,IAAiBA,OAAO,MAAP,KAAkB,CAAnC;AACA,uBAAO;AACHI,6BAASzB,KAAK,OAAL,CADN;AAEH0B,gCAAY;AACRC,8BAAO,CAAC3B,KAAK,KAAL;AADA;AAFT,iBAAP;AAMH,aAjBC;AAkBF4B,mBAAO;AAlBL,SADC;AAqBPC,wBAAgB,wBAAU7B,IAAV,EAAgB;AAC5B,gBAAIA,KAAK,SAAL,CAAJ,EAAqB,OAAOA,KAAK,MAAL,CAAP;AACrB,mBAAOA,KAAK,MAAL,CAAP;AACH,SAxBM;AAyBP8B,2BAAmB,2BAAU9B,IAAV,EAAgB;AAC/B,mBAAOA,KAAK,MAAL,CAAP;AACH;AA3BM,KAAX;AA6BH;;AAGD,SAAS+B,MAAT,CAAgBC,GAAhB,EAAqBC,IAArB,EAA2B;AACvBxD,MAAEsD,MAAF,CAAS;AACL;AACAG,iBAASF;AAFJ,KAAT,EAGG;AACC;AACAC,cAAOA,OAAOA,IAAP,GAAc,SAFtB;AAGCE,gBAAQ,EAACC,GAAG,EAAJ,EAAQC,GAAG,EAAX,EAHT;AAICjB,eAAO;AAJR,KAHH;AASH;;AAED,SAASkB,oBAAT,GAAgC;AAC5B,QAAIN,MAAM,wGAAV;AACA,QAAI;AACAD,eAAOC,GAAP,EAAY,QAAZ;AACH,KAFD,CAEE,OAAOO,CAAP,EAAU;AACRvB,cAAMgB,GAAN;AACH;AACJ;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASQ,gBAAT,CAA0BC,IAA1B,EAAgC;AAC5B,QAAIjC,GAAJ,EAASkC,KAAT;AACA,QAAI9D,OAAOiC,YAAX,EAAyB;AACrB;AACAL,cAAM5B,OAAOiC,YAAP,EAAN;AACA,YAAIL,IAAImC,UAAJ,IAAkBnC,IAAIoC,UAA1B,EAAsC;AAClCF,oBAAQlC,IAAImC,UAAJ,CAAe,CAAf,CAAR;AACAD,kBAAMG,cAAN;;AAEA;AACA;AACA,gBAAIC,KAAKjD,SAASkD,aAAT,CAAuB,KAAvB,CAAT;AACAD,eAAGE,SAAH,GAAeP,IAAf;AACA,gBAAIQ,OAAOpD,SAASqD,sBAAT,EAAX;AAAA,gBAA8CC,IAA9C;AAAA,gBAAoDC,QAApD;AACA,mBAAQD,OAAOL,GAAGO,UAAlB,EAA+B;AAC3BD,2BAAWH,KAAKK,WAAL,CAAiBH,IAAjB,CAAX;AACH;AACDT,kBAAMa,UAAN,CAAiBN,IAAjB;;AAEA;AACA,gBAAIG,QAAJ,EAAc;AACVV,wBAAQA,MAAMc,UAAN,EAAR;AACAd,sBAAMe,aAAN,CAAoBL,QAApB;AACAV,sBAAMgB,WAAN,CAAkBN,QAAlB;AACAV,sBAAMiB,QAAN,CAAe,IAAf;AACAnD,oBAAIM,eAAJ;AACAN,oBAAIO,QAAJ,CAAa2B,KAAb;AACH;AACJ;AACJ,KA3BD,MA2BO,IAAI7C,SAAS+D,SAAT,IAAsB/D,SAAS+D,SAAT,CAAmB3B,IAAnB,IAA2B,SAArD,EAAgE;AACnE;AACApC,iBAAS+D,SAAT,CAAmBjD,WAAnB,GAAiCkD,SAAjC,CAA2CpB,IAA3C;AACH;AACJ","file":"main.js","sourcesContent":["// import 'addGroup';const addGroup = require('addGroup');\r\nvar localStorageConst = {\r\n    emojionearea_expanded: 'emojionearea_expanded'\r\n};\r\nvar add_group,edit_group;\r\n$(function () {\r\n    $.datetimepicker.setLocale('ru');\r\n    window.emojioneVersion = \"3.0.0\";\r\n    add_group = new addGroup($('.new_group_list'));\r\n    edit_group = new editGroup($('.group_edit'));\r\n    // Menu Toggle\r\n    $('.menu-collapse').on('click', function () {\r\n        $('.leftpanel').toggleClass('slideInLeft slideOutLeft').addClass('show-leftpanel');\r\n        return false;\r\n    });\r\n\r\n    $('.date-picker-1').datetimepicker({\r\n        format: 'd.m.Y',\r\n        inline: false,\r\n        lang: 'ru',\r\n        dayOfWeekStart: 1,\r\n        timepicker: false,\r\n        scrollInput: false,\r\n        scrollMonth: false\r\n    });\r\n\r\n    $('.datetime-picker-1').datetimepicker({\r\n        format: 'd.m.Y H:i',\r\n        inline: false,\r\n        lang: 'ru',\r\n        step: 60,\r\n        dayOfWeekStart: 1,\r\n        timepicker: true,\r\n        scrollInput: false,\r\n        scrollMonth: false\r\n    });\r\n\r\n    $('.js-select').select2();\r\n\r\n    init_select_ajax($(\".js-select-ajax\"));\r\n\r\n    $(document).on('click', '._copy', function () {\r\n        var $this = $(this);\r\n        var $e = $($this.data('target'));\r\n\r\n        if (!$e.length) {\r\n            $e = $(this).closest('._copy_wr').find('._copy_target');\r\n        }\r\n\r\n        CopyToClipboard($e);\r\n        $this.tooltip('show');\r\n\r\n        setTimeout(function () {\r\n            $this.tooltip('dispose');\r\n        }, 1000);\r\n        return false;\r\n    });\r\n\r\n});\r\n\r\nfunction CopyToClipboard($e) {\r\n    var rng, sel;\r\n    if ($e.val()) {\r\n        $e.select();\r\n    } else if (document.createRange) {\r\n        rng = document.createRange();\r\n        rng.selectNode($e[0]);\r\n        sel = window.getSelection();\r\n        sel.removeAllRanges();\r\n        sel.addRange(rng);\r\n    } else {\r\n        alert(\"Browser not supported copy to clipboard\");\r\n    }\r\n    document.execCommand(\"copy\");\r\n}\r\n\r\nfunction init_select_ajax($e) {\r\n    $e.select2({\r\n        ajax: {\r\n            dataType: 'json',\r\n            delay: 250,\r\n            data: function (params) {\r\n                return {\r\n                    search: params['term'],\r\n                    page: params['page']\r\n                };\r\n            },\r\n            processResults: function (data, params) {\r\n                params['page'] = params['page'] || 1;\r\n                return {\r\n                    results: data['items'],\r\n                    pagination: {\r\n                        more: (!data['end'])\r\n                    }\r\n                };\r\n            },\r\n            cache: true\r\n        },\r\n        templateResult: function (data) {\r\n            if (data['loading']) return data['text'];\r\n            return data['text'];\r\n        },\r\n        templateSelection: function (data) {\r\n            return data['text'];\r\n        }\r\n    });\r\n}\r\n\r\n\r\nfunction notify(msg, type) {\r\n    $.notify({\r\n        // options\r\n        message: msg\r\n    }, {\r\n        // settings\r\n        type: (type ? type : 'success'),\r\n        offset: {x: 20, y: 80},\r\n        delay: 2000\r\n    });\r\n}\r\n\r\nfunction notify_default_error() {\r\n    var msg = \"Извините, при выполнении запроса произошла ошибка. Повторите запрос или обратитесь в службу поддержки.\";\r\n    try {\r\n        notify(msg, \"danger\");\r\n    } catch (e) {\r\n        alert(msg);\r\n    }\r\n}\r\n\r\n// function pasteHtmlAtCaret(html) {\r\n//     var sel, range;\r\n//     if (window.getSelection) {\r\n//         sel = window.getSelection();\r\n//         if (sel.getRangeAt && sel.rangeCount) {\r\n//             range = sel.getRangeAt(0);\r\n//             range.deleteContents();\r\n//             var el = document.createElement(\"div\");\r\n//             el.innerHTML = html;\r\n//             var frag = document.createDocumentFragment(), node, lastNode;\r\n//             while ((node = el.firstChild)) {\r\n//                 lastNode = frag.appendChild(node);\r\n//             }\r\n//             range.insertNode(frag);\r\n//             if (lastNode) {\r\n//                 range = range.cloneRange();\r\n//                 range.setStartAfter(lastNode);\r\n//                 range.collapse(true);\r\n//                 sel.removeAllRanges();\r\n//                 sel.addRange(range);\r\n//             }\r\n//         }\r\n//     }\r\n// }\r\n\r\nfunction pasteHtmlAtCaret(html) {\r\n    var sel, range;\r\n    if (window.getSelection) {\r\n        // IE9 and non-IE\r\n        sel = window.getSelection();\r\n        if (sel.getRangeAt && sel.rangeCount) {\r\n            range = sel.getRangeAt(0);\r\n            range.deleteContents();\r\n\r\n            // Range.createContextualFragment() would be useful here but is\r\n            // non-standard and not supported in all browsers (IE9, for one)\r\n            var el = document.createElement(\"div\");\r\n            el.innerHTML = html;\r\n            var frag = document.createDocumentFragment(), node, lastNode;\r\n            while ((node = el.firstChild)) {\r\n                lastNode = frag.appendChild(node);\r\n            }\r\n            range.insertNode(frag);\r\n\r\n            // Preserve the selection\r\n            if (lastNode) {\r\n                range = range.cloneRange();\r\n                range.setStartAfter(lastNode);\r\n                range.setEndAfter(lastNode);\r\n                range.collapse(true);\r\n                sel.removeAllRanges();\r\n                sel.addRange(range);\r\n            }\r\n        }\r\n    } else if (document.selection && document.selection.type != \"Control\") {\r\n        // IE < 9\r\n        document.selection.createRange().pasteHTML(html);\r\n    }\r\n}\r\n"]}